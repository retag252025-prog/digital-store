<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8" />
<title>Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</title>
<link rel="stylesheet" href="style.css" />

<style>
.search-results {
    max-width: 1200px;
    margin: 25px auto;
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
    gap: 20px;
}

.search-item {
    background: white;
    border: 1px solid #ddd;
    padding: 15px;
    border-radius: 8px;
    text-align: center;
    transition: 0.2s;
}

.search-item:hover {
    transform: scale(1.03);
    border-color: #ffa41c;
}

.search-item img {
    width: 100%;
    border-radius: 8px;
}

.price {
    font-size: 18px;
    font-weight: bold;
    margin: 5px 0;
    color: #111;
}

.view-btn {
    background: #FF9900;
    padding: 8px 12px;
    border: none;
    border-radius: 6px;
    cursor: pointer;
    font-weight: bold;
}
</style>
</head>

<body>

<header class="header">
    <div class="logo" onclick="location.href='/'" style="cursor:pointer;">Digital Store</div>

    <div class="search-box">
        <input id="searchInput" type="text" placeholder="Ø§Ø¨Ø­Ø« Ù…Ø±Ø© Ø£Ø®Ø±Ù‰...">
        <button onclick="searchAgain()">Ø¨Ø­Ø«</button>
    </div>

    <div class="account">
        <a href="/cart.html">ðŸ›’ Ø§Ù„Ø³Ù„Ø© <span id="cart-count">0</span></a>
    </div>
</header>

<h2 style="text-align:center;">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø¨Ø­Ø«</h2>

<div class="search-results" id="results"></div>

<script>
// Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ÙƒÙ„Ù…Ø© Ø§Ù„Ø¨Ø­Ø«
let query = localStorage.getItem("search") || "";

// Ø§Ø³ØªØ±Ø¬Ø§Ø¹ ÙƒÙ„ Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
let products = JSON.parse(localStorage.getItem("allProducts") || "[]");

// ÙÙ„ØªØ±Ø© Ø§Ù„Ù…Ù†ØªØ¬Ø§Øª
let filtered = products.filter(p =>
    p.name.includes(query) ||
    p.description.includes(query)
);

let box = document.getElementById("results");

filtered.forEach((p, i) => {
    box.innerHTML += `
        <div class="search-item">
            <img src="${p.image}">
            <h3>${p.name}</h3>
            <div class="price">${p.price} Ø¬Ù†ÙŠÙ‡</div>
            <button class="view-btn" onclick='viewProduct(${i})'>Ø¹Ø±Ø¶ Ø§Ù„Ù…Ù†ØªØ¬</button>
        </div>
    `;
});

function viewProduct(i) {
    localStorage.setItem("selectedProduct", JSON.stringify(filtered[i]));
    window.location.href = "/product.html";
}

function searchAgain() {
    let q = document.getElementById("searchInput").value;
    localStorage.setItem("search", q);
    location.reload();
}

// ØªØ­Ø¯ÙŠØ« Ø¹Ø¯Ø¯ Ø§Ù„Ø³Ù„Ø©
function updateCartCount() {
    let cart = JSON.parse(localStorage.getItem("cart") || "[]");
    document.getElementById("cart-count").innerText = cart.length;
}
updateCartCount();
</script>

</body>
</html>
